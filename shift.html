<!DOCTYPE html>
<html lang="fa">
  <head>
    <meta charset="UTF-8" />
    <title>Rojin Paya</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/persian-datepicker@1.2.0/dist/css/persian-datepicker.min.css"
    />
    <style>
      body {
        font-family: sans-serif;
        direction: rtl;
        background: #1a1a1a;
        color: #fff;
        text-align: center;
        padding: 30px;
      }
      input,
      button {
        padding: 10px;
        margin: 5px;
        border-radius: 8px;
        border: none;
        font-size: 16px;
      }
      button {
        background-color: #0099ff;
        color: white;
        cursor: pointer;
      }
      table {
        margin: 20px auto;
        border-collapse: collapse;
        width: 80%;
      }
      th,
      td {
        border: 1px solid #555;
        padding: 10px;
        border-radius: 4px;
      }
      tr:nth-child(even) {
        background: #2a2a2a;
      }
      .Ø±ÙˆØ² {
        color: #00ff88;
        font-weight: bold;
      }
      .Ø´Ø¨ {
        color: #66aaff;
        font-weight: bold;
      }
      .ØªØ¹Ø·ÛŒÙ„ {
        color: #cccccc;
        font-weight: bold;
      }
    </style>
  </head>
  <body>
    <h2>ğŸ“… Ø¨Ø±Ù†Ø§Ù…Ù‡ Ø´ÛŒÙØª Ú©Ø§Ø±ÛŒ</h2>
    <p>Ø§Ù„Ú¯Ùˆ: Û² Ø±ÙˆØ² Ø±ÙˆØ²Ú©Ø§Ø± â† Û² Ø±ÙˆØ² Ø´Ø¨â€ŒÚ©Ø§Ø± â† Û² Ø±ÙˆØ² ØªØ¹Ø·ÛŒÙ„</p>

    <label>ØªØ§Ø±ÛŒØ® Ø´Ø±ÙˆØ¹ (Ø§ÙˆÙ„ÛŒÙ† Ø±ÙˆØ² Ø´ÛŒÙØª Ø±ÙˆØ²):</label>
    <input type="text" id="startDate" placeholder="Ø§Ù†ØªØ®Ø§Ø¨ ØªØ§Ø±ÛŒØ®" />
    <button onclick="generateSchedule()">Ù†Ù…Ø§ÛŒØ´ Ø¨Ø±Ù†Ø§Ù…Ù‡</button>

    <table id="shiftTable">
      <thead>
        <tr>
          <th>ØªØ§Ø±ÛŒØ® Ø´Ù…Ø³ÛŒ</th>
          <th>Ø±ÙˆØ² Ù‡ÙØªÙ‡</th>
          <th>Ù†ÙˆØ¹ Ø´ÛŒÙØª</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>

    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/persian-date@1.1.0/dist/persian-date.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/persian-datepicker@1.2.0/dist/js/persian-datepicker.min.js"></script>

    <script>
      $(document).ready(function () {
        // ğŸŸ¢ ØªÙ†Ø¸ÛŒÙ… Ø§ÙˆÙ„ÛŒÙ‡ ØªÙ‚ÙˆÛŒÙ… Ø´Ù…Ø³ÛŒ
        $("#startDate").persianDatepicker({
          format: "YYYY/MM/DD",
          initialValue: false,
        });
      });

      // âœ… ØªØ§Ø¨Ø¹ ØªØ¨Ø¯ÛŒÙ„ Ø§Ø¹Ø¯Ø§Ø¯ ÙØ§Ø±Ø³ÛŒ Ø¨Ù‡ Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ
      function fixNumbers(str) {
        return str.replace(/[Û°-Û¹]/g, (d) => "Û°Û±Û²Û³Û´ÛµÛ¶Û·Û¸Û¹".indexOf(d));
      }

      function generateSchedule() {
        let startDateStr = $("#startDate").val();
        if (!startDateStr) {
          alert("Ù„Ø·ÙØ§Ù‹ ØªØ§Ø±ÛŒØ® Ø´Ø±ÙˆØ¹ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯");
          return;
        }

        console.log("ØªØ§Ø±ÛŒØ® Ø§Ù†ØªØ®Ø§Ø¨â€ŒØ´Ø¯Ù‡:", startDateStr);

        // ğŸŸ¢ ØªØ¨Ø¯ÛŒÙ„ Ø§Ø¹Ø¯Ø§Ø¯ ÙØ§Ø±Ø³ÛŒ Ø¨Ù‡ Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ
        let enDateStr = fixNumbers(startDateStr);
        console.log("ØªØ§Ø±ÛŒØ® Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒâ€ŒØ´Ø¯Ù‡:", enDateStr);

        // ğŸŸ¢ Ø¬Ø¯Ø§ Ú©Ø±Ø¯Ù† Ø³Ø§Ù„ØŒ Ù…Ø§Ù‡ØŒ Ø±ÙˆØ²
        let parts = enDateStr.split("/");
        let y = parseInt(parts[0]);
        let m = parseInt(parts[1]);
        let d = parseInt(parts[2]);

        // ğŸŸ¢ Ø³Ø§Ø®Øª ØµØ­ÛŒØ­ ØªØ§Ø±ÛŒØ® Ø´Ù…Ø³ÛŒ
        let startDate = new persianDate([y, m, d]);
        console.log("ØªØ§Ø±ÛŒØ® Ø´Ù…Ø³ÛŒ Ù…Ø¹ØªØ¨Ø±:", startDate.format("YYYY/MM/DD"));

        let tbody = $("#shiftTable tbody");
        tbody.empty();

        const shifts = ["Ø±ÙˆØ²", "Ø±ÙˆØ²", "Ø´Ø¨", "Ø´Ø¨", "ØªØ¹Ø·ÛŒÙ„", "ØªØ¹Ø·ÛŒÙ„"];

        for (let i = 0; i < 30; i++) {
          let date = startDate.clone().add("days", i);

          let dayOfWeek = date.format("dddd");
          let shiftType = shifts[i % 6];

          let row = `<tr>
                  <td>${date.format("YYYY/MM/DD")}</td>
                  <td>${dayOfWeek}</td>
                  <td class="${shiftType}">${shiftType}</td>
                </tr>`;
          tbody.append(row);
        }
      }
    </script>
    <h3>Made By M.R</h3>
  </body>
</html>
