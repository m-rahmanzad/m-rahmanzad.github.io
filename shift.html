<!DOCTYPE html>
<html lang="fa">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Rojin Paya</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/persian-datepicker@1.2.0/dist/css/persian-datepicker.min.css"
    />
    <style>
      body {
        font-family: "Vazirmatn", sans-serif;
        direction: rtl;
        background: #1a1a1a;
        color: #fff;
        text-align: center;
        padding: 30px;
        margin: 0;
      }

      h2,
      h3,
      p,
      label {
        margin: 10px 0;
      }

      input,
      button {
        padding: 12px 16px;
        margin: 8px 4px;
        border-radius: 10px;
        border: none;
        font-size: 16px;
        width: 220px;
        max-width: 90%;
      }

      button {
        background-color: #0099ff;
        color: white;
        cursor: pointer;
        transition: background 0.3s;
      }

      button:hover {
        background-color: #007acc;
      }

      .table-container {
        overflow-x: auto;
        margin-top: 20px;
      }

      .shift-table {
        border-collapse: collapse;
        width: 100%;
        min-width: 200px;
        background-color: #222;
        border-radius: 10px;
        overflow: hidden;
      }

      th,
      td {
        border: 1px solid #444;
        padding: 10px;
        font-size: 15px;
      }

      th {
        background: #333;
      }

      tr:nth-child(even) {
        background: #2a2a2a;
      }

      .روز {
        color: #00ff88;
        font-weight: bold;
      }

      .شب {
        color: #66aaff;
        font-weight: bold;
      }

      .تعطیل {
        color: #cccccc;
        font-weight: bold;
      }

      h3 {
        margin-top: 40px;
        color: #888;
        font-size: 14px;
      }

      /* ✅ حالت موبایل */
      @media (max-width: 600px) {
        body {
          padding: 15px;
        }

        h2 {
          font-size: 20px;
        }

        p {
          font-size: 14px;
        }

        input,
        button {
          display: block;
          width: 100%;
          margin: 8px auto;
          font-size: 15px;
        }

        th,
        td {
          padding: 8px;
          font-size: 14px;
        }

        table {
          font-size: 14px;
          min-width: unset;
        }
      }
    </style>
  </head>

  <body>
    <h2>📅 برنامه شیفت کاری</h2>
    <p>الگو: ۲ روز روزکار ← ۲ روز شب‌کار ← ۲ روز تعطیل</p>

    <label>تاریخ شروع (اولین روز شیفت روز):</label>
    <input type="text" id="startDate" placeholder="انتخاب تاریخ" />
    <button onclick="generateSchedule()">نمایش برنامه</button>

    <div class="table-container">
      <table id="shiftTable" class="shift-table">
        <thead>
          <tr>
            <th>تاریخ شمسی</th>
            <th>روز هفته</th>
            <th>نوع شیفت</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/persian-date@1.1.0/dist/persian-date.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/persian-datepicker@1.2.0/dist/js/persian-datepicker.min.js"></script>

    <script>
      $(document).ready(function () {
        $("#startDate").persianDatepicker({
          format: "YYYY/MM/DD",
          initialValue: false,
          autoClose: true,
          observer: true,
          altField: "#startDateAlt",
        });
      });

      function fixNumbers(str) {
        return str.replace(/[۰-۹]/g, (d) => "۰۱۲۳۴۵۶۷۸۹".indexOf(d));
      }

      function generateSchedule() {
        let startDateStr = $("#startDate").val();
        if (!startDateStr) {
          alert("لطفاً تاریخ شروع را وارد کنید");
          return;
        }

        let enDateStr = fixNumbers(startDateStr);
        let parts = enDateStr.split("/");
        let y = parseInt(parts[0]);
        let m = parseInt(parts[1]);
        let d = parseInt(parts[2]);

        let startDate = new persianDate([y, m, d]);
        let tbody = $("#shiftTable tbody");
        tbody.empty();

        const shifts = ["روز", "روز", "شب", "شب", "تعطیل", "تعطیل"];

        for (let i = 0; i < 30; i++) {
          let date = startDate.clone().add("days", i);
          let dayOfWeek = date.format("dddd");
          let shiftType = shifts[i % 6];

          let row = `<tr>
                      <td>${date.format("YYYY/MM/DD")}</td>
                      <td>${dayOfWeek}</td>
                      <td class="${shiftType}">${shiftType}</td>
                    </tr>`;
          tbody.append(row);
        }
      }
    </script>

    <h3>Made By M.R</h3>
  </body>
</html>
